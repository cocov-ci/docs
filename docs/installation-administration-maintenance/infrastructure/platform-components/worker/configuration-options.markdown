---
title: "Configuration Options"
id: "configuration-options"
layout: documentation
toc: true
---

{% include helm-chart-warning.html %}

## General Configuration

Configurations that didn't exactly match other groups.

| Variable Name       | Description |
|---------------------|-------------|
| `REDIS_URL`         | The URL for the Primary Redis Database used by the platform. This value must be the same as provided to `COCOV_REDIS_URL` on {% doclink "API/Configuration Options", title: "API's Configuration Options" %}. |
| `MAX_PARALLEL_JOBS` | The maximum number of parallel jobs to run at a given moment. Please do notice that if more than an instance is executed, this number indicates how many jobs will be processed concurrently per instance, and not in the whole platform. |

## Docker-in-Docker Configuration

Variables on this group defines how a given Worker instance must connect to its
DinD instance. Keep in mind that each worker must have its own DinD instance.

| Variable Name          | Description |
|------------------------|-------------|
| `DOCKER_SOCKET`        | The socket address to the DinD daemon socket. Supported values are `tcp://host[:port]`, `unix://PATH` |
| `DOCKER_TLS_CA_PATH`   | Path to the Certificate Authority certificate used to sign the Client Certificate |
| `DOCKER_TLS_CERT_PATH` | Path to the client TLS Certificate to connect to the DinD Daemon |
| `DOCKER_TLS_KEY_PATH`  | Path to the client TLS Key to connect to the DinD Daemon  |

## API Configuration

Configuration related to how the Worker will connect to the system API.

| Variable Name       | Description |
|---------------------|-------------|
| `API_URL`           | Base URL to the system's API. Can be an internal URL, if desired. Format is `http[s]://api_hostname[:port]` |
| `SERVICE_TOKEN`     | A {% doclink "Service Tokens", title: "Service Token" %} created by the API to allow the Worker connections. |


## Storage Configuration

Storage Configuration instructs Worker where to find clonned repositories. This
value must correspond to the same value provided to {% doclink "API/Configuration Options", title: "API's Storage Configuration" %}

| Variable Name                         | Description                          |
|---------------------------------------|--------------------------------------|
| `GIT_SERVICE_STORAGE_MODE`      | Which storage mode to use. Must be either `local` or `s3`. |

Then, depending on the chosen mode, one of the following extra variables must
also be defined:

### Local Storage Mode

The Local Storage mode stores data in a local shared directory.
Although the path must exist locally, it may point to an NFS share, for instance.

| Variable Name                          | Description                          |
|----------------------------------------|--------------------------------------|
| `COCOV_GIT_SERVICE_LOCAL_STORAGE_PATH` | The path in which the platform will store files. It must exist and be the same used by the API. |

### S3 Storage Mode

The S3 storage mode stores shared data within a S3 bucket, and only takes the
target bucket name. All other configuration options are processed by the AWS
SDK. Reffer to its documentation for further information.


| Variable Name                              | Description                          |
|--------------------------------------------|--------------------------------------|
| `GIT_SERVICE_S3_BUCKET_NAME` | The bucket name to be used to access Git data |

## Using a Deployed Cache Server

In case your instance has a deployed {% doclink "Cache" %} server, its URL
should be provided in the following variable.

| Variable Name      | Description |
|--------------------|-------------|
| `CACHE_SERVER_URL` | The base URL to the local Cache server to be used by plugins and Worker instances. Format is `http[s]://host[:port]` |

## Troubleshooting Options

Options on this category are meant to be used during troubleshooting, and
leaving them enabled may cause sensitive information to be leaked in logs and/or
a higher volume of logs to be generated by the platform. Be careful when using
them.

| Variable Name   | Description |
|-----------------|-------------|
| `DEBUG_PLUGINS` | Enabled verbose logging of plugins output and other operations regarding them. |
